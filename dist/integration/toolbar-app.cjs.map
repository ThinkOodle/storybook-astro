{"version":3,"sources":["../../src/integration/toolbar-app.ts"],"names":["defineToolbarApp"],"mappings":"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","file":"toolbar-app.cjs","sourcesContent":["/**\n * Storybook Dev Toolbar App\n * \n * Shows a Storybook icon in the Astro dev toolbar that opens Storybook when clicked.\n */\n\nimport { defineToolbarApp } from 'astro/toolbar';\n\nexport default defineToolbarApp({\n  init(canvas) {\n    // Fetch Storybook config\n    fetch('/__storybook-config')\n      .then(res => res.json())\n      .then(config => {\n        const storybookUrl = `http://${config.host}:${config.port}`;\n        \n        // Create the UI\n        const container = document.createElement('astro-dev-toolbar-window');\n        \n        const content = document.createElement('div');\n        content.style.padding = '1rem';\n        \n        const title = document.createElement('h2');\n        title.textContent = 'Storybook';\n        title.style.marginTop = '0';\n        title.style.marginBottom = '0.5rem';\n        title.style.fontSize = '1.1rem';\n        title.style.fontWeight = '600';\n        content.appendChild(title);\n        \n        const description = document.createElement('p');\n        description.textContent = 'View and develop your components in isolation.';\n        description.style.marginTop = '0';\n        description.style.marginBottom = '1rem';\n        description.style.fontSize = '0.85rem';\n        description.style.opacity = '0.8';\n        content.appendChild(description);\n        \n        // Open Storybook button using astro-dev-toolbar-button\n        const openButton = document.createElement('astro-dev-toolbar-button');\n        openButton.setAttribute('button-style', 'purple');\n        openButton.innerHTML = `\n          <span style=\"display: flex; align-items: center; gap: 0.5rem;\">\n            <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n              <path d=\"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6\"/>\n              <polyline points=\"15,3 21,3 21,9\"/>\n              <line x1=\"10\" y1=\"14\" x2=\"21\" y2=\"3\"/>\n            </svg>\n            Open Storybook\n          </span>\n        `;\n        openButton.addEventListener('click', () => {\n          window.open(storybookUrl, '_blank');\n        });\n        content.appendChild(openButton);\n        \n        // Status indicator\n        const statusContainer = document.createElement('div');\n        statusContainer.style.marginTop = '1rem';\n        statusContainer.style.fontSize = '0.75rem';\n        statusContainer.style.display = 'flex';\n        statusContainer.style.alignItems = 'center';\n        statusContainer.style.gap = '0.5rem';\n        \n        const statusDot = document.createElement('span');\n        statusDot.style.width = '8px';\n        statusDot.style.height = '8px';\n        statusDot.style.borderRadius = '50%';\n        statusDot.style.backgroundColor = '#888';\n        \n        const statusText = document.createElement('span');\n        statusText.textContent = 'Checking...';\n        statusText.style.opacity = '0.7';\n        \n        statusContainer.appendChild(statusDot);\n        statusContainer.appendChild(statusText);\n        content.appendChild(statusContainer);\n        \n        container.appendChild(content);\n        canvas.appendChild(container);\n        \n        // Check if Storybook is running\n        checkStorybookStatus(storybookUrl, statusDot, statusText);\n      })\n      .catch(() => {\n        // Fallback if config fetch fails\n        const container = document.createElement('astro-dev-toolbar-window');\n        const content = document.createElement('div');\n        content.style.padding = '1rem';\n        content.innerHTML = `\n          <h2 style=\"margin: 0 0 0.5rem 0; font-size: 1.1rem;\">Storybook</h2>\n          <p style=\"margin: 0; font-size: 0.85rem; opacity: 0.8;\">\n            Run <code style=\"background: rgba(255,255,255,0.1); padding: 2px 6px; border-radius: 4px;\">npm run storybook</code> to start Storybook.\n          </p>\n        `;\n        container.appendChild(content);\n        canvas.appendChild(container);\n      });\n  },\n});\n\n/**\n * Check if Storybook is running and update the status indicator\n */\nasync function checkStorybookStatus(\n  url: string, \n  dot: HTMLElement, \n  text: HTMLElement\n): Promise<void> {\n  try {\n    await fetch(url, { mode: 'no-cors' });\n    // no-cors mode doesn't give us status, but if it doesn't throw, something is there\n    dot.style.backgroundColor = '#4ade80';\n    text.textContent = `Running at ${url}`;\n  } catch {\n    dot.style.backgroundColor = '#f87171';\n    text.textContent = 'Not running';\n  }\n}\n"]}